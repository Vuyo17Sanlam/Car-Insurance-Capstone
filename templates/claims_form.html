{% extends "base.html" %} {% block head_content %} {% block css %}
<link
  rel="stylesheet"
  href="{{ url_for('static', filename='css/forms/claims_forms.css') }}"
/>
{% endblock %} {% endblock %} {% block content %}
<div class="form-container">
  {% if vehicles_list%}
  <form action="{{url_for('user_bp.submit_claim')}}" method="POST">
    <h1>Claim Form</h1>
    <p class="instruction">
      Please fill out the details below to submit your insurance claim.
    </p>
    <div class="form-group">
      <label for="vehicle">Select Vehicle</label>
      <select id="vehicle" name="vehicle" required>
        {% for vehicle in vehicles_list %}
        <option value="{{ vehicle.vehicle_id }}">
          {{ vehicle.make }} {{ vehicle.model }} ({{ vehicle.year }})
        </option>
        {% endfor %}
      </select>
    </div>

    <div class="form-group">
      <label>What Happened?</label>
      <div class="radio-group">
        <div class="radio-option">
          <input
            type="radio"
            id="theft"
            name="incident"
            value="Theft"
            required
          />
          <label for="theft">Theft</label>
        </div>
        <div class="radio-option">
          <input type="radio" id="accident" name="incident" value="Accident" />
          <label for="accident">Accident</label>
        </div>
        <div class="radio-option">
          <input
            type="radio"
            id="disaster"
            name="incident"
            value="Natural Disaster"
          />
          <label for="disaster">Natural Disaster</label>
        </div>
      </div>
    </div>

    <div class="form-group">
      <label for="description">Description of Incident</label>
      <textarea id="description" name="description" required></textarea>
    </div>

    <div class="form-group">
      <label for="date">Date of Incident</label>
      <input type="date" id="date" name="incident_date" required />
    </div>

    <div class="requirements">
      <p><strong>Required Documents:</strong></p>
      <p>Please attach the following as google drive links</p>
      <ul>
        <li>Police report</li>
        <li>Certified affidavit</li>
        <li>PDF of third-party details (if another vehicle was involved)</li>
        <li>
          Photos & videos of the damage (registration number visible in at least
          one)
        </li>
      </ul>
    </div>

    <div class="form-group">
      <label for="documents">Police Report</label>
      <input type="url" id="documents" name="police_report" required />
    </div>
    <div class="form-group">
      <label for="documents">Certified Affidavit</label>
      <input type="url" id="documents" name="affidavit" required />
    </div>
    <div class="form-group-imgs" id="form-group-imgs">
      <label for="documents">Photo/ Video</label>
      <input type="url" id="documents" name="images[]" required />
    </div>
    <button type="button" onclick="addLinkInput()">Add Photo/ Video</button>
    <button class="submit-button" type="submit">Submit Claim</button>
  </form>
  {% else %}
  <p>
    You do not have any vehicles insured with us. Please insure a vehicle before
    submitting a claim.
  </p>
  {% endif %}
</div>
<script>
  function addLinkInput() {
    const container = document.getElementById("form-group-imgs");
    const input = document.createElement("input");
    input.type = "url";
    input.name = "images[]"; // This was missing
    input.className = "form-control"; // Add this if you have this class, or add other styling classes
    input.style.marginTop = "8px"; // Add some spacing
    input.required = true;
    container.appendChild(input);
  }
</script>
{% endblock %}
