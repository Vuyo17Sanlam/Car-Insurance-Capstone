{% extends "home_base.html" %} {% block head_content %}
<style>
  body {
    font-family: "Inter", sans-serif;
    background-color: #f8fafc;
    color: #1e293b;
  }

  .signup-container {
    max-width: 800px;
    margin: 48px auto;
    padding: 32px;
    background: white;
    border-radius: 16px;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1),
      0 2px 4px -1px rgba(0, 0, 0, 0.06);
  }

  .signup-header {
    text-align: center;
    margin-bottom: 32px;
  }

  .signup-title {
    font-size: 32px;
    font-weight: 700;
    color: #2563eb;
    margin-bottom: 8px;
  }

  .signup-subtitle {
    color: #64748b;
  }

  .form-label {
    font-weight: 500;
    color: #1e293b;
    margin-bottom: 8px;
  }

  .form-control {
    border-radius: 8px;
    padding: 12px 16px;
    border: 1px solid #e2e8f0;
    transition: all 0.2s ease;
  }

  .form-control:focus {
    border-color: #3b82f6;
    box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
  }

  .btn-primary {
    background-color: #2563eb;
    border: none;
    padding: 12px 24px;
    font-weight: 600;
    border-radius: 8px;
    transition: all 0.2s ease;
  }

  .btn-primary:hover {
    background-color: #1d4ed8;
  }

  .form-section {
    margin-bottom: 24px;
  }

  .form-row {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 24px;
  }

  .login-link {
    text-align: center;
    margin-top: 24px;
    color: #64748b;
  }

  .login-link a {
    color: #2563eb;
    text-decoration: none;
    font-weight: 500;
  }

  .login-link a:hover {
    text-decoration: underline;
  }

  @media (max-width: 768px) {
    .signup-container {
      margin: 16px;
      padding: 24px;
    }

    .form-row {
      grid-template-columns: 1fr;
    }
  }
</style>
{% endblock %} {% block content %} {% with messages =
get_flashed_messages(with_categories=true) %} {% if messages %} {% for category,
message in messages %}
<div
  class="alert alert-{{ category }} alert-dismissible fade show"
  role="alert"
>
  {{ message }}
  <button
    type="button"
    class="btn-close"
    data-bs-dismiss="alert"
    aria-label="Close"
  ></button>
</div>
{% endfor %} {% endif %} {% endwith %}
<div class="container">
  <div class="signup-container">
    <div class="signup-header">
      <h1 class="signup-title">Create Your Account</h1>
      <p class="signup-subtitle">
        Join Swift Insurance for comprehensive car insurance protection
      </p>
    </div>

    <form method="POST" action="{{url_for('user_bp.submit_signup_page')}}">
      <div class="form-section">
        <h5>Personal Information</h5>
        <div class="form-row">
          <div class="mb-3">
            <label for="title" class="form-label">Title</label>
            <select id="title" class="form-select" name="title">
              <option>Select</option>
              <option>Mr</option>
              <option>Mrs</option>
              <option>Miss</option>
              <option>Dr</option>
            </select>
          </div>
          <div class="mb-3">
            <label for="firstName" class="form-label">First Name</label>
            <input
              type="text"
              class="form-control"
              id="firstName"
              placeholder="e.g. John"
              name="user_name"
              required
            />
          </div>
          <div class="mb-3">
            <label for="surname" class="form-label">Surname</label>
            <input
              type="text"
              class="form-control"
              id="surname"
              placeholder="e.g. Smith"
              name="surname"
              required
            />
          </div>
        </div>
        <div class="form-row">
          <div class="mb-3">
            <label for="gender" class="form-label">Gender</label>
            <select id="gender" class="form-select" name="gender">
              <option>Select</option>
              <option>Female</option>
              <option>Male</option>
            </select>
          </div>
          <div class="mb-3">
            <label for="dob" class="form-label">Date of Birth</label>
            <input
              type="date"
              class="form-control"
              id="dob"
              name="dob"
              required
            />
          </div>
        </div>
      </div>

      <div class="form-section">
        <h5>Contact Information</h5>
        <div class="mb-3">
          <label for="address" class="form-label">Address</label>
          <input
            type="text"
            class="form-control"
            id="address"
            placeholder="e.g. 123 Main St, City"
            name="address"
            required
          />
        </div>
        <div class="form-row">
          <div class="mb-3">
            <label for="contactNumber" class="form-label">Contact Number</label>
            <input
              type="text"
              pattern="\d{10}"
              class="form-control"
              id="contactNumber"
              placeholder="e.g. 0823456789"
              name="phone_no"
              required
            />
          </div>
          <div class="mb-3">
            <label for="email" class="form-label">Email Address</label>
            <input
              type="email"
              class="form-control"
              id="email"
              placeholder="e.g. john@out.co.za"
              name="email"
              required
            />
          </div>
        </div>
      </div>

      <div class="form-section">
        <h5>Account Security</h5>
        <div class="mb-3">
          <label for="rsaId" class="form-label">RSA ID Number</label>
          <input
            type="text"
            class="form-control"
            id="rsaId"
            placeholder="e.g. 9503310092088"
            name="id_number"
            pattern="\d{13}"
            required
          />
        </div>
        <div class="form-row">
          <div class="mb-3">
            <label for="password" class="form-label">Password</label>
            <input
              type="password"
              class="form-control"
              id="password"
              placeholder="Enter password"
              name="password_hash"
              pattern=".{6,}"
              required
            />
          </div>
          <div class="mb-3">
            <label for="confirmPassword" class="form-label"
              >Confirm Password</label
            >
            <input
              type="password"
              class="form-control"
              id="confirmPassword"
              placeholder="Confirm password"
              name="confirm"
              pattern=".{6,}"
              required
            />
          </div>
        </div>
      </div>

      <div class="d-grid gap-2">
        <button type="submit" class="btn btn-primary">Create Account</button>
      </div>
    </form>

    <div class="login-link">
      Already have an account?
      <a href="{{url_for('user_bp.login_page')}}">Sign in</a>
    </div>
  </div>
</div>

<script
  src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
  crossorigin="anonymous"
></script>

<script>
  const rsaIdInput = document.getElementById("rsaId");
  rsaIdInput.addEventListener("input", function () {
    this.setCustomValidity("");
  });
  rsaIdInput.addEventListener("invalid", function () {
    if (this.value !== "") {
      this.setCustomValidity("Your RSA ID should be 13 digits long.");
    }
  });

  // Phone Number validation
  const phoneInput = document.getElementById("contactNumber");
  phoneInput.addEventListener("input", function () {
    this.setCustomValidity("");
  });
  phoneInput.addEventListener("invalid", function () {
    if (this.value !== "") {
      this.setCustomValidity("Phone number must be 10 digits.");
    }
  });

  // Password validation
  const passwordInput = document.getElementById("password");
  passwordInput.addEventListener("input", function () {
    this.setCustomValidity("");
  });
  passwordInput.addEventListener("invalid", function () {
    if (this.value !== "") {
      this.setCustomValidity("Password must be at least 6 characters long.");
    }
  });

  // Age validation (must be 18+)

  document.addEventListener("DOMContentLoaded", function () {
    const dobInput = document.getElementById("dob");
    dobInput.addEventListener("input", function () {
      const today = new Date();
      const birthDate = new Date(this.value);
      let age = today.getFullYear() - birthDate.getFullYear();
      const m = today.getMonth() - birthDate.getMonth();
      if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) {
        age--;
      } // If age is less than 18, show a custom message

      if (age < 18) {
        this.setCustomValidity("You must be at least 18 years old.");
      } else {
        this.setCustomValidity(""); // Clear custom error message if age is valid
      } // Trigger the validation message

      this.reportValidity();
    });
  });
</script>
{% endblock %}
